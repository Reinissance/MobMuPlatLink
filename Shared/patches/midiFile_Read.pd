#N canvas 846 141 913 713 12;
#X obj 544 169 bng 15 250 50 0 empty empty step_one_tick 18 7 0 12
-4160 -257985 -1;
#X obj 116 124 tgl 45 0 empty empty play -45 23 0 12 -24198 -1 -258699
0 1;
#X msg 391 498 rewind;
#X text 235 497 go to start of file;
#X floatatom 461 590 15 0 0 0 current_tick - -;
#X obj 235 321 hradio 15 1 0 16 empty empty dump_track_number 0 -6
0 12 -62784 -241291 -1 0;
#X msg 235 342 dump \$1;
#X msg 354 461 68050;
#X msg 179 286 track \$1;
#X obj 179 246 hradio 15 1 0 16 empty empty play_track_number 0 -6
0 12 -62784 -241291 -1 7;
#X obj 116 223 metro 2;
#X text 193 562 creation arguments: midi_file_name;
#X text 298 341 parse this track to main window;
#X floatatom 709 680 15 0 0 0 last_tick - -;
#X msg 311 418 verbose \$1;
#X text 123 418 verbosity defaults to 1;
#X text 229 17 1: choose a MIDI file to play;
#X text 175 134 2: start playing it;
#X obj 435 444 spigot;
#X obj 480 410 tgl 25 0 empty empty loop -45 12 0 12 -4160 -257985
-258113 0 1;
#X msg 12 119 read \$1;
#X floatatom 311 394 5 0 0 0 - - -;
#X obj 311 375 hradio 15 1 0 5 empty empty verbosity 0 -6 0 12 -62784
-241291 -1 1;
#X obj 179 263 - 1;
#X obj 65 525 ctlout 123;
#X msg 65 495 123;
#X obj 65 467 bng 15 250 50 0 empty empty all_notes_off 17 7 0 10 -258113
-257985 -1;
#X obj 718 610 t b b;
#X floatatom 134 283 5 0 0 0 - - -;
#X obj 750 637 bng 15 250 50 0 empty empty end 17 7 0 10 -258113 -257985
-1;
#X floatatom 632 453 9 0 0 0 loop_start_tick: - -;
#X text 214 263 -1 = play all tracks;
#X obj 709 658 f;
#X obj 435 470 f 0;
#N canvas 302 192 1058 571 route_events 0;
#X obj 20 29 inlet;
#X floatatom 172 125 5 0 0 0 note - -;
#X floatatom 249 125 5 0 0 1 velocity - -;
#X obj 172 50 route 144 145 146 147 148 149 150 151 152 153 154 155
156 157 158 159, f 80;
#X obj 172 103 unpack 0 0;
#X obj 178 182 route 128 129 130 131 132 133 134 135 136 137 138 139
140 141 142 143, f 79;
#X obj 76 146 print note_on;
#X obj 76 260 print note_off;
#X obj 705 261 noteout 1;
#X obj 786 261 noteout 2;
#X obj 865 261 noteout 3;
#X obj 945 261 noteout 4;
#X obj 178 289 route 176 177 178 179 180 181 182 183 184 185 186 187
188 189 190 191 192, f 80;
#X floatatom 178 347 5 0 0 0 controller - -;
#X floatatom 252 347 5 0 0 1 value - -;
#X obj 178 323 unpack 0 0;
#X obj 52 372 print controller;
#X obj 706 359 ctlout 1;
#X text 172 30 route note-on events by channel:;
#X text 235 162 route note off events by channel:;
#X text 225 265 route controller events by channel:;
#X text 505 262 send events to MIDI devices:;
#X obj 179 423 route 240;
#X obj 179 502 print sysex;
#X obj 76 118 spigot;
#X obj 95 24 inlet;
#X obj 23 71 tgl 15 0 empty empty print_status_names 17 7 0 10 -4034
-1 -1 0 1;
#X obj 77 232 spigot;
#X obj 52 345 spigot;
#X obj 179 463 spigot;
#X obj 239 463 spigot;
#X obj 266 502 print sys;
#X text 505 359 send events to MIDI devices:;
#X obj 776 359 ctlout 2;
#X obj 846 359 ctlout 3;
#X obj 916 359 ctlout 4;
#X connect 0 0 3 0;
#X connect 3 0 4 0;
#X connect 3 0 8 0;
#X connect 3 0 24 0;
#X connect 3 1 9 0;
#X connect 3 2 10 0;
#X connect 3 3 11 0;
#X connect 3 16 5 0;
#X connect 4 0 1 0;
#X connect 4 1 2 0;
#X connect 5 0 8 0;
#X connect 5 0 27 0;
#X connect 5 1 9 0;
#X connect 5 2 10 0;
#X connect 5 3 11 0;
#X connect 5 16 12 0;
#X connect 12 0 15 0;
#X connect 12 0 17 0;
#X connect 12 0 28 0;
#X connect 12 1 33 0;
#X connect 12 2 34 0;
#X connect 12 3 35 0;
#X connect 12 17 22 0;
#X connect 15 0 13 0;
#X connect 15 1 14 0;
#X connect 22 0 29 0;
#X connect 22 1 30 0;
#X connect 24 0 6 0;
#X connect 25 0 26 0;
#X connect 26 0 24 1;
#X connect 26 0 27 1;
#X connect 26 0 28 1;
#X connect 26 0 29 1;
#X connect 26 0 30 1;
#X connect 27 0 7 0;
#X connect 28 0 16 0;
#X connect 29 0 23 0;
#X connect 30 0 31 0;
#X restore 435 613 pd route_events;
#N canvas 248 352 1172 763 route_info 0;
#X obj 34 13 inlet;
#X floatatom 34 73 3 0 0 1 format - -;
#X floatatom 142 73 5 0 0 1 tracks - -;
#X floatatom 252 73 5 0 0 1 ticks_per_quarternote - -;
#X floatatom 360 140 5 0 0 1 tracks - -;
#X symbolatom 546 190 40 0 0 0 - - -;
#X obj 538 224 unpack 0 0;
#X floatatom 615 278 15 0 0 0 last_tick - -;
#X floatatom 538 250 5 0 0 1 track - -;
#X floatatom 449 190 5 0 0 1 track - -;
#X obj 449 164 unpack 0 s;
#X obj 627 316 unpack 0 0 0 0;
#X floatatom 627 352 3 0 0 1 / - -;
#X floatatom 663 353 3 0 0 1 - - -;
#X floatatom 699 353 5 0 0 1 clocks_per_click - -;
#X floatatom 736 379 5 0 0 1 32nds_per_quarternote - -;
#X floatatom 716 136 15 0 0 0 microsec_per_quarternote - -;
#X obj 229 354 /;
#X floatatom 442 374 15 0 0 0 microsec_per_tick - -;
#X obj 229 395 / 1000;
#X floatatom 229 426 15 0 0 0 millisec_per_tick - -;
#X obj 906 190 print other_meta;
#X obj 360 103 route seq_num name end time_sig microsec_per_quarternote
;
#X obj 805 161 route key_sig;
#X obj 805 218 unpack 0 0 s;
#X symbolatom 898 323 10 0 0 0 key - -;
#X floatatom 805 247 5 0 0 1 +sharps/-flats - -;
#X obj 851 276 tgl 15 0 empty empty minor 17 7 0 10 -262144 -1 -1 0
1;
#X obj 546 164 list prepend;
#X obj 898 297 list prepend;
#X obj 34 43 route format tracks ticks_per_quarternote;
#X obj 405 211 print name:;
#X text 503 352 time signature:;
#X obj 115 162 t b f;
#X msg 115 186 60000;
#X obj 115 209 /;
#X floatatom 115 255 5 0 0 0 bpm - -;
#X obj 115 139 / 1000;
#X obj 159 229 s \$0-midiFileBPM;
#X obj 228 477 s \$0-msec_per_tick;
#X obj 219 165 s \$0-ticksPerQuarter;
#X connect 0 0 30 0;
#X connect 6 0 8 0;
#X connect 6 1 7 0;
#X connect 10 0 9 0;
#X connect 10 1 28 0;
#X connect 11 0 12 0;
#X connect 11 1 13 0;
#X connect 11 2 14 0;
#X connect 11 3 15 0;
#X connect 17 0 18 0;
#X connect 17 0 19 0;
#X connect 19 0 20 0;
#X connect 19 0 39 0;
#X connect 22 0 4 0;
#X connect 22 1 10 0;
#X connect 22 1 31 0;
#X connect 22 2 6 0;
#X connect 22 3 11 0;
#X connect 22 4 16 0;
#X connect 22 4 17 0;
#X connect 22 4 37 0;
#X connect 22 5 23 0;
#X connect 23 0 24 0;
#X connect 23 1 21 0;
#X connect 24 0 26 0;
#X connect 24 1 27 0;
#X connect 24 2 29 0;
#X connect 28 0 5 0;
#X connect 29 0 25 0;
#X connect 30 0 1 0;
#X connect 30 1 2 0;
#X connect 30 2 3 0;
#X connect 30 2 17 1;
#X connect 30 2 40 0;
#X connect 30 3 22 0;
#X connect 33 0 34 0;
#X connect 33 1 35 1;
#X connect 34 0 35 0;
#X connect 35 0 36 0;
#X connect 35 0 38 0;
#X connect 37 0 33 0;
#X restore 785 609 pd route_info;
#X obj 718 582 route bang;
#X text 222 461 goto tick 68050:;
#X floatatom 386 166 9 0 0 0 - - -;
#X text 81 613 MIDI messages are output on first outlet as lists:;
#X text 386 88 milliseconds per tick is calculated from metadata at
start of file. Step one tick to get the initial value.;
#X obj 435 562 midifile;
#X text 548 561 meta data \, bang at end of file on third outlet;
#X obj 573 598 tgl 15 1 empty empty print_status_names 17 7 0 10 -4034
-1 -1 0 1;
#X text 728 696 Martin Peach \, 2011-2020;
#X msg 228 42 \; toSystem list /contentMenu /chosenMidiFile mid;
#N canvas 581 193 706 352 fromSystemReturnedContent 0;
#X obj 51 3 r fromSystem;
#X obj 51 26 route list;
#X obj 51 49 route /contentMenu;
#X obj 51 72 route /chosenMidiFile;
#X obj 51 96 symbol;
#X obj 51 123 outlet;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X restore 12 89 pd fromSystemReturnedContent;
#X obj 13 14 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 13 34 openpanel;
#N canvas 570 72 1034 726 sync2Link 0;
#X obj 100 60 r \$0-midiFileBPM;
#X obj 241 99 abl_link~;
#X obj 532 113 change;
#X obj 101 141 / 120;
#X obj 101 194 s \$0-syncFactor;
#X obj 260 184 i;
#X obj 260 206 change;
#X obj 343 287 r \$0-ticksPerQuarter;
#X obj 260 300 *;
#X obj 245 445 outlet;
#X obj 263 362 spigot;
#X obj 260 234 t f f;
#X obj 259 266 -;
#X obj 343 257 f;
#X obj 375 116 r \$0-play;
#X obj 377 196 sel 1;
#X msg 306 57 connect \$1;
#X msg 163 101 tempo \$1;
#X obj 258 160 + 1;
#X obj 115 87 spigot;
#X obj 152 29 inlet;
#X obj 305 29 inlet;
#X obj 532 137 t b f;
#X obj 140 230 spigot;
#X obj 140 254 i;
#X obj 140 278 change;
#X obj 140 302 sel 0;
#X obj 140 388 s \$0-start;
#X msg 302 331 1;
#X obj 140 326 t b b;
#X obj 488 246 outlet;
#X msg 205 254 0;
#X connect 0 0 3 0;
#X connect 0 0 19 0;
#X connect 1 1 23 0;
#X connect 1 2 18 0;
#X connect 1 3 2 0;
#X connect 2 0 22 0;
#X connect 3 0 4 0;
#X connect 5 0 6 0;
#X connect 6 0 11 0;
#X connect 7 0 8 1;
#X connect 8 0 10 0;
#X connect 10 0 9 0;
#X connect 11 0 12 0;
#X connect 11 1 13 1;
#X connect 12 0 8 0;
#X connect 13 0 12 1;
#X connect 14 0 15 0;
#X connect 14 0 23 1;
#X connect 15 0 30 0;
#X connect 15 1 10 1;
#X connect 15 1 27 0;
#X connect 16 0 1 0;
#X connect 17 0 1 0;
#X connect 18 0 5 0;
#X connect 19 0 17 0;
#X connect 20 0 19 1;
#X connect 21 0 16 0;
#X connect 22 0 3 0;
#X connect 22 1 3 1;
#X connect 23 0 24 0;
#X connect 24 0 25 0;
#X connect 25 0 26 0;
#X connect 26 0 29 0;
#X connect 28 0 10 1;
#X connect 29 0 27 0;
#X connect 29 0 31 0;
#X connect 29 1 28 0;
#X connect 29 1 13 0;
#X connect 31 0 23 1;
#X restore 490 519 pd sync2Link;
#X obj 386 127 r \$0-msec_per_tick;
#X obj 116 175 s \$0-play;
#X obj 520 493 tgl 15 0 empty empty setBPMfromFile 17 7 0 12 -262144
-1 -1 0 1;
#X obj 603 516 tgl 15 0 empty empty connectLink 17 7 0 12 -262144 -1
-1 0 1;
#X obj 386 189 *;
#X obj 414 203 r \$0-syncFactor;
#X floatatom 379 221 5 0 0 0 - - -;
#X obj 115 200 r \$0-start;
#X obj 73 243 sel 0;
#X connect 0 0 41 0;
#X connect 1 0 51 0;
#X connect 2 0 41 0;
#X connect 5 0 6 0;
#X connect 6 0 41 0;
#X connect 7 0 41 0;
#X connect 8 0 41 0;
#X connect 9 0 23 0;
#X connect 10 0 41 0;
#X connect 14 0 41 0;
#X connect 18 0 33 0;
#X connect 19 0 18 1;
#X connect 20 0 41 0;
#X connect 21 0 14 0;
#X connect 22 0 21 0;
#X connect 23 0 8 0;
#X connect 23 0 28 0;
#X connect 25 0 24 0;
#X connect 26 0 25 0;
#X connect 27 0 18 0;
#X connect 27 1 32 0;
#X connect 27 1 29 0;
#X connect 30 0 33 1;
#X connect 32 0 13 0;
#X connect 33 0 41 0;
#X connect 36 0 27 0;
#X connect 36 1 35 0;
#X connect 38 0 54 0;
#X connect 41 0 34 0;
#X connect 41 1 4 0;
#X connect 41 1 32 1;
#X connect 41 2 36 0;
#X connect 43 0 34 1;
#X connect 46 0 20 0;
#X connect 47 0 48 0;
#X connect 47 0 45 0;
#X connect 48 0 20 0;
#X connect 49 0 41 0;
#X connect 49 1 2 0;
#X connect 50 0 38 0;
#X connect 52 0 49 0;
#X connect 53 0 49 1;
#X connect 54 0 10 1;
#X connect 54 0 56 0;
#X connect 55 0 54 1;
#X connect 57 0 10 0;
#X connect 57 0 58 0;
#X connect 58 0 25 0;
